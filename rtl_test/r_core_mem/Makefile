
none: obj_dir/Vselftest filegen

obj_dir/Vselftest: obj_dir/Vselftest.cpp sim.cpp
	+gmake -f Vselftest.mk -C obj_dir
        +gmake -f prefix.mk -C obj_dir

filegen: alu.cpp
    gcc -O2 alu.cpp

obj_dir/Vselftest.cpp: ../../rtl/adder.v ../../rtl/bitselect.v ../../rtl/common2.v ../../rtl/ecc.v ../../rtl/lfsr.v ../../rtl/lru8.v ../../rtl/popcnt.v ../../rtl/shifter.v ../../rtl/heart/agu_r.v ../../rtl/heart/agu.v ../../rtl/heart/agu_w.v ../../rtl/alu/alu_shift.v ../../rtl/alu/alu.v ../../rtl/heart/heart_supp.v ../../rtl/heart/heart.v ../../rtl/heart/gazump.v ../../rtl/heart/in_flip_rt.v ../../rtl/heart/rat2.v ../../rtl/heart/ratS.v ../../rtl/heart/ratV.v ../../rtl/heart/regfile_flags.v ../../rtl/heart/regfile.v ../../rtl/heart/reg_in_flight.v ../../rtl/heart/rrf_flags.v ../../rtl/heart/rrf.v ../../rtl/rs/rs_alloc.v ../../rtl/rs/rs_block.v ../../rtl/rs/rs_select_fifo.v ../../rtl/rs/rs_store.v ../../rtl/rs/rs.v ../../rtl/cache/cc_combined.v ../../rtl/cache/cc_fstalle.v ../../rtl/cache/opinion_cache.v ../../rtl/cache/code_tag.v ../../rtl/cache/cmlb.v ../../rtl/cache/dc1_block.v ../../rtl/cache/dc1_dirty.v ../../rtl/cache/dc1_tag.v ../../rtl/cache/dmlb.v ../../rtl/cache/mreq.v ../../rtl/cams/agucam.v ../../rtl/cams/ghtcam.v ../../rtl/cams/l1dmisscam.v ../../rtl/cams/miss_queue2.v ../../rtl/cams/sttlbmiss.v ../../rtl/cntrl/bob_except.v ../../rtl/cntrl/bob_indir.v ../../rtl/cntrl/bob.v ../../rtl/cntrl/baal.v ../../rtl/core/core.v ../../rtl/ent/decjmp.v ../../rtl/ent/decoder.v ../../rtl/ent/adultmed.v ../../rtl/ent/distrib.v ../../rtl/ent/ent1.v ../../rtl/ent/ght.v ../../rtl/ent/instrq_extra.v ../../rtl/ent/instr_queue.v ../../rtl/ent/rstack.v ../../rtl/ent/sizedec.v ../../rtl/ent/tbuf_cam.v ../../rtl/ent/tbuf.v ../../rtl/l2cache/dc2_block.v ../../rtl/l2cache/dc2_cntrl.v ../../rtl/l2cache/dc2_dirty.v ../../rtl/l2cache/dc2_tag.v ../../rtl/l2cache/rbus.v ../../rtl/lsq/ldq.v ../../rtl/lsq/ret.v ../../rtl/lsq/lsq_req2.v ../../rtl/lsq/stq.v ../../rtl/math/compress.v ../../rtl/math/compress_24.v ../../rtl/math/faha.v ../../rtl/math/fpuaddd.v ../../rtl/math/fpuadds.v ../../rtl/math/fpumuld.v ../../rtl/math/fpumuls.v ../../rtl/math/ldstfp.v ../../rtl/math/ldstfpE.v ../../rtl/math/fpmisc.v ../../rtl/math/shufl.v ../../rtl/math/simd.v ../../rtl/math/icompr.v ../../rtl/math/imul.v ../../rtl/math/fcmp.v ../../rtl/math/ficonv.v ../../rtl/math/ifconvt.v ../../rtl/thinker/thinker.v ../../rtl/heart/fun_lsu.v ../../rtl/head/fun_alu.v ../../rtl/heart/fun_lsq.v ../../rtl/spectre/agusec.v ../../rtl/cams/msicam.v ../../rtl/lsq/stq_L.v ../../rtl/lsq/stq_A.v ../../rtl/lsq/stq_data.v ../../rtl/lsq/stq_adata.v ../../rtl/math/sdupmass.v ../../rtl/spectre/mul.v ../../rtl/math/tbl.v selftest.v\
../../rtl/fpu/fun_fpcu_BOTH.v ../../rtl/fpu/fun_fpcu_LOW.v ../../fpu/heart/fun_fpcu_H.v ../../rtl/fpu/fun_fpcu.v ../../rtl/fpu/fun_fpsu_BOTH.v ../../rtl/fpu/fun_fpsu_LOW.v ../../rtl/fpu/fun_fpsu.v ../../rtl/cache/dc1_spectr.v ../../rtl/lsq/stq_ram.v ../../rtl/cache/insert_convert.v ../../rtl/feeder/feeder.v
	verilator --cc --language 1800-2017 +1800-2017ext+v --hierarchical --top-module selftest -exe alu.cpp -I../../rtl -I../../rtl/heart --compiler clang ../../rtl/adder.v ../../rtl/bitselect.v ../../rtl/common2.v ../../rtl/ecc.v ../../rtl/lfsr.v ../../rtl/lru8.v ../../rtl/popcnt.v ../../rtl/shifter.v ../../rtl/heart/agu_r.v ../../rtl/heart/agu.v ../../rtl/heart/agu_w.v ../../rtl/alu/alu_shift.v ../../rtl/alu/alu.v ../../rtl/heart/heart_supp.v ../../rtl/heart/heart.v ../../rtl/heart/gazump.v ../../rtl/heart/in_flip_rt.v ../../rtl/heart/rat2.v ../../rtl/heart/ratS.v ../../rtl/heart/ratV.v ../../rtl/heart/regfile_flags.v ../../rtl/heart/regfile.v ../../rtl/heart/reg_in_flight.v ../../rtl/heart/rrf_flags.v ../../rtl/heart/rrf.v ../../rtl/rs/rs_alloc.v ../../rtl/rs/rs_block.v ../../rtl/rs/rs_select_fifo.v ../../rtl/rs/rs_store.v ../../rtl/rs/rs.v ../../rtl/cache/cc_combined.v ../../rtl/cache/cc_fstalle.v ../../rtl/cache/opinion_cache.v ../../rtl/cache/code_tag.v ../../rtl/cache/cmlb.v ../../rtl/cache/dc1_block.v ../../rtl/cache/dc1_dirty.v ../../rtl/cache/dc1_tag.v ../../rtl/cache/dmlb.v ../../rtl/cache/mreq.v ../../rtl/cams/agucam.v ../../rtl/cams/ghtcam.v ../../rtl/cams/l1dmisscam.v ../../rtl/cams/miss_queue2.v ../../rtl/cams/sttlbmiss.v ../../rtl/cntrl/bob_except.v ../../rtl/cntrl/bob_indir.v ../../rtl/cntrl/bob.v ../../rtl/cntrl/baal.v ../../rtl/core/core.v ../../rtl/ent/decjmp.v ../../rtl/ent/decoder.v ../../rtl/ent/adultmed.v ../../rtl/ent/distrib.v ../../rtl/ent/ent1.v ../../rtl/ent/ght.v ../../rtl/ent/instrq_extra.v ../../rtl/ent/instr_queue.v ../../rtl/ent/rstack.v ../../rtl/ent/sizedec.v ../../rtl/ent/tbuf_cam.v ../../rtl/ent/tbuf.v ../../rtl/l2cache/dc2_block.v ../../rtl/l2cache/dc2_cntrl.v ../../rtl/l2cache/dc2_dirty.v ../../rtl/l2cache/dc2_tag.v ../../rtl/l2cache/rbus.v ../../rtl/lsq/ldq.v ../../rtl/lsq/ret.v ../../rtl/lsq/lsq_req2.v ../../rtl/lsq/stq.v ../../rtl/math/compress.v ../../rtl/math/compress_24.v ../../rtl/math/faha.v ../../rtl/math/fpuaddd.v ../../rtl/math/fpuadds.v ../../rtl/math/fpumuld.v ../../rtl/math/fpumuls.v ../../rtl/math/ldstfp.v ../../rtl/math/ldstfpE.v ../../rtl/math/fpmisc.v ../../rtl/math/shufl.v ../../rtl/math/simd.v ../../rtl/math/icompr.v ../../rtl/math/imul.v ../../rtl/math/fcmp.v ../../rtl/math/ficonv.v ../../rtl/math/ifconvt.v ../../rtl/thinker/thinker.v ../../rtl/heart/fun_lsu.v ../../rtl/head/fun_alu.v ../../rtl/heart/fun_lsq.v ../../rtl/spectre/agusec.v ../../rtl/cams/msicam.v ../../rtl/lsq/stq_L.v ../../rtl/lsq/stq_A.v ../../rtl/lsq/stq_data.v ../../rtl/lsq/stq_adata.v ../../rtl/math/sdupmass.v ../../rtl/spectre/mul.v \
../../rtl/fpu/fun_fpcu_BOTH.v ../../rtl/fpu/fun_fpcu_LOW.v ../../rtl/heart/fun_fpu_H.v ../../rtl/fpu/fun_fpcu.v ../../rtl/fpu/fun_fpsu_BOTH.v ../../rtl/fpu/fun_fpsu_LOW.v ../../rtl/fpu/fun_fpsu.v ../../rtl/cache/dc1_spectr.v ../../rtl/lsq/stq_ram.v ../../rtl/cache/insert_convert.v ../../rtl/feeder/feeder.v ../../rtl/math/tbl.v selftest.v  -Wno-UNOPTFLAT -Wno-CASEX -CFLAGS -g -CFLAGS -O1 --output-split 100000 -unroll-count 1 --public --savable -threads 3





